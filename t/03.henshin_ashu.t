use strict;
use Test::More;
use Capture::Tiny qw/ capture /;
use Test::Output;
use Test::Exception;

my @ashu = (
    { henshin => 'タカジャバ',     medal => [ 'タカ', 'クジャク', 'バッタ'] },
    { henshin => 'タカジャーター', medal => [ 'タカ', 'クジャク', 'チーター'] },
    { henshin => 'タカジャゾ',     medal => [ 'タカ', 'クジャク', 'ゾウ'] },
    { henshin => 'タカジャタ',     medal => [ 'タカ', 'クジャク', 'タコ'] },
    { henshin => 'タカキリドル',   medal => [ 'タカ', 'カマキリ', 'コンドル'] },
    { henshin => 'タカキリバ',     medal => [ 'タカ', 'カマキリ', 'バッタ'] },
    { henshin => 'タカキリーター', medal => [ 'タカ', 'カマキリ', 'チーター'] },
    { henshin => 'タカキリゾ',     medal => [ 'タカ', 'カマキリ', 'ゾウ'] },
    { henshin => 'タカキリタ',     medal => [ 'タカ', 'カマキリ', 'タコ'] },
    { henshin => 'タカトラドル',   medal => [ 'タカ', 'トラ', 'コンドル'] },
    { henshin => 'タカトラーター', medal => [ 'タカ', 'トラ', 'チーター'] },
    { henshin => 'タカトラゾ',     medal => [ 'タカ', 'トラ', 'ゾウ'] },
    { henshin => 'タカトラタ',     medal => [ 'タカ', 'トラ', 'タコ'] },
    { henshin => 'タカゴリドル',   medal => [ 'タカ', 'ゴリラ', 'コンドル'] },
    { henshin => 'タカゴリバ',     medal => [ 'タカ', 'ゴリラ', 'バッタ'] },
    { henshin => 'タカゴリーター', medal => [ 'タカ', 'ゴリラ', 'チーター'] },
    { henshin => 'タカゴリゾ',     medal => [ 'タカ', 'ゴリラ', 'ゾウ'] },
    { henshin => 'タカゴリタ',     medal => [ 'タカ', 'ゴリラ', 'タコ'] },
    { henshin => 'タカウドル',     medal => [ 'タカ', 'ウナギ', 'コンドル'] },
    { henshin => 'タカウバ',       medal => [ 'タカ', 'ウナギ', 'バッタ'] },
    { henshin => 'タカウーター',   medal => [ 'タカ', 'ウナギ', 'チーター'] },
    { henshin => 'タカウゾ',       medal => [ 'タカ', 'ウナギ', 'ゾウ'] },
    { henshin => 'タカウタ',       medal => [ 'タカ', 'ウナギ', 'タコ'] },
    { henshin => 'ガタジャドル',   medal => [ 'クワガタ','クジャク', 'コンドル'] },
    { henshin => 'ガタジャバ',     medal => [ 'クワガタ','クジャク', 'バッタ'] },
    { henshin => 'ガタジャーター', medal => [ 'クワガタ','クジャク', 'チーター'] },
    { henshin => 'ガタジャゾ',     medal => [ 'クワガタ','クジャク', 'ゾウ'] },
    { henshin => 'ガタジャタ',     medal => [ 'クワガタ','クジャク', 'タコ'] },
    { henshin => 'ガタキリドル',   medal => [ 'クワガタ', 'カマキリ', 'コンドル'] },
    { henshin => 'ガタキリーター', medal => [ 'クワガタ', 'カマキリ', 'チーター'] },
    { henshin => 'ガタキリゾ',     medal => [ 'クワガタ', 'カマキリ', 'ゾウ'] },
    { henshin => 'ガタキリタ',     medal => [ 'クワガタ', 'カマキリ', 'タコ'] },
    { henshin => 'ガタトラドル',   medal => [ 'クワガタ', 'トラ', 'コンドル'] },
    { henshin => 'ガタトラバ',     medal => [ 'クワガタ', 'トラ', 'バッタ'] },
    { henshin => 'ガタトラーター', medal => [ 'クワガタ', 'トラ', 'チーター'] },
    { henshin => 'ガタトラゾ',     medal => [ 'クワガタ', 'トラ', 'ゾウ'] },
    { henshin => 'ガタトラタ',     medal => [ 'クワガタ', 'トラ', 'タコ'] },
    { henshin => 'ガタゴリドル',   medal => [ 'クワガタ', 'ゴリラ', 'コンドル'] },
    { henshin => 'ガタゴリバ',     medal => [ 'クワガタ', 'ゴリラ', 'バッタ'] },
    { henshin => 'ガタゴリーター', medal => [ 'クワガタ', 'ゴリラ', 'チーター'] },
    { henshin => 'ガタゴリゾ',     medal => [ 'クワガタ', 'ゴリラ', 'ゾウ'] },
    { henshin => 'ガタゴリタ',     medal => [ 'クワガタ', 'ゴリラ', 'タコ'] },
    { henshin => 'ガタウドル',     medal => [ 'クワガタ', 'ウナギ', 'コンドル'] },
    { henshin => 'ガタウバ',       medal => [ 'クワガタ', 'ウナギ', 'バッタ'] },
    { henshin => 'ガタウーター',   medal => [ 'クワガタ', 'ウナギ', 'チーター'] },
    { henshin => 'ガタウゾ',       medal => [ 'クワガタ', 'ウナギ', 'ゾウ'] },
    { henshin => 'ガタウタ',       medal => [ 'クワガタ', 'ウナギ', 'タコ'] },
    { henshin => 'ラジャドル',     medal => [ 'ライオン', 'クジャク', 'コンドル'] },
    { henshin => 'ラジャバ',       medal => [ 'ライオン', 'クジャク', 'バッタ'] },
    { henshin => 'ラジャーター',   medal => [ 'ライオン', 'クジャク', 'チーター'] },
    { henshin => 'ラジャゾ',       medal => [ 'ライオン', 'クジャク', 'ゾウ'] },
    { henshin => 'ラジャタ',       medal => [ 'ライオン', 'クジャク', 'タコ'] },
    { henshin => 'ラキリドル',     medal => [ 'ライオン', 'カマキリ', 'コンドル'] },
    { henshin => 'ラキリバ',       medal => [ 'ライオン', 'カマキリ', 'バッタ'] },
    { henshin => 'ラキリーター',   medal => [ 'ライオン', 'カマキリ', 'チーター'] },
    { henshin => 'ラキリゾ',       medal => [ 'ライオン', 'カマキリ', 'ゾウ'] },
    { henshin => 'ラキリタ',       medal => [ 'ライオン', 'カマキリ', 'タコ'] },
    { henshin => 'ラトラドル',     medal => [ 'ライオン', 'トラ', 'コンドル'] },
    { henshin => 'ラトラバ',       medal => [ 'ライオン', 'トラ', 'バッタ'] },
    { henshin => 'ラトラゾ',       medal => [ 'ライオン', 'トラ', 'ゾウ'] },
    { henshin => 'ラトラタ',       medal => [ 'ライオン', 'トラ', 'タコ'] },
    { henshin => 'ラゴリドル',     medal => [ 'ライオン', 'ゴリラ', 'コンドル'] },
    { henshin => 'ラゴリバ',       medal => [ 'ライオン', 'ゴリラ', 'バッタ'] },
    { henshin => 'ラゴリーター',   medal => [ 'ライオン', 'ゴリラ', 'チーター'] },
    { henshin => 'ラゴリゾ',       medal => [ 'ライオン', 'ゴリラ', 'ゾウ'] },
    { henshin => 'ラゴリタ',       medal => [ 'ライオン', 'ゴリラ', 'タコ'] },
    { henshin => 'ラウドル',       medal => [ 'ライオン', 'ウナギ', 'コンドル'] },
    { henshin => 'ラウバ',         medal => [ 'ライオン', 'ウナギ', 'バッタ'] },
    { henshin => 'ラウーター',     medal => [ 'ライオン', 'ウナギ', 'チーター'] },
    { henshin => 'ラウゾ',         medal => [ 'ライオン', 'ウナギ', 'ゾウ'] },
    { henshin => 'ラウタ',         medal => [ 'ライオン', 'ウナギ', 'タコ'] },
    { henshin => 'サジャドル',     medal => [ 'サイ', 'クジャク', 'コンドル' ] },
    { henshin => 'サジャバ',       medal => [ 'サイ', 'クジャク', 'バッタ' ] },
    { henshin => 'サジャーター',   medal => [ 'サイ', 'クジャク', 'チーター' ] },
    { henshin => 'サジャゾ',       medal => [ 'サイ', 'クジャク', 'ゾウ' ] },
    { henshin => 'サジャタ',       medal => [ 'サイ', 'クジャク', 'タコ' ] },
    { henshin => 'サキリドル',     medal => [ 'サイ', 'カマキリ', 'コンドル' ] },
    { henshin => 'サキリバ',       medal => [ 'サイ', 'カマキリ', 'バッタ' ] },
    { henshin => 'サキリーター',   medal => [ 'サイ', 'カマキリ', 'チーター' ] },
    { henshin => 'サキリゾ',       medal => [ 'サイ', 'カマキリ', 'ゾウ' ] },
    { henshin => 'サキリタ',       medal => [ 'サイ', 'カマキリ', 'タコ' ] },
    { henshin => 'サトラドル',     medal => [ 'サイ', 'トラ', 'コンドル' ] },
    { henshin => 'サトラバ',       medal => [ 'サイ', 'トラ', 'バッタ' ] },
    { henshin => 'サトラーター',   medal => [ 'サイ', 'トラ', 'チーター' ] },
    { henshin => 'サトラゾ',       medal => [ 'サイ', 'トラ', 'ゾウ' ] },
    { henshin => 'サトラタ',       medal => [ 'サイ', 'トラ', 'タコ' ] },
    { henshin => 'サゴリドル',     medal => [ 'サイ', 'ゴリラ', 'コンドル' ] },
    { henshin => 'サゴリバ',       medal => [ 'サイ', 'ゴリラ', 'バッタ' ] },
    { henshin => 'サゴリーター',   medal => [ 'サイ', 'ゴリラ', 'チーター' ] },
    { henshin => 'サゴリタ',       medal => [ 'サイ', 'ゴリラ', 'タコ' ] },
    { henshin => 'サウドル',       medal => [ 'サイ', 'ウナギ', 'コンドル' ] },
    { henshin => 'サウバ',         medal => [ 'サイ', 'ウナギ', 'バッタ' ] },
    { henshin => 'サウーター',     medal => [ 'サイ', 'ウナギ', 'チーター' ] },
    { henshin => 'サウゾ',         medal => [ 'サイ', 'ウナギ', 'ゾウ' ] },
    { henshin => 'サウタ',         medal => [ 'サイ', 'ウナギ', 'タコ' ] },
    { henshin => 'シャジャドル',   medal => [ 'シャチ', 'クジャク', 'コンドル'] },
    { henshin => 'シャジャバ',     medal => [ 'シャチ', 'クジャク', 'バッタ'] },
    { henshin => 'シャジャーター', medal => [ 'シャチ', 'クジャク', 'チーター'] },
    { henshin => 'シャジャゾ',     medal => [ 'シャチ', 'クジャク', 'ゾウ'] },
    { henshin => 'シャジャタ',     medal => [ 'シャチ', 'クジャク', 'タコ'] },
    { henshin => 'シャキリドル',   medal => [ 'シャチ', 'カマキリ', 'コンドル'] },
    { henshin => 'シャキリバ',     medal => [ 'シャチ', 'カマキリ', 'バッタ'] },
    { henshin => 'シャキリーター', medal => [ 'シャチ', 'カマキリ', 'チーター'] },
    { henshin => 'シャキリゾ',     medal => [ 'シャチ', 'カマキリ', 'ゾウ'] },
    { henshin => 'シャキリタ',     medal => [ 'シャチ', 'カマキリ', 'タコ'] },
    { henshin => 'シャトラドル',   medal => [ 'シャチ', 'トラ', 'コンドル'] },
    { henshin => 'シャトラバ',     medal => [ 'シャチ', 'トラ', 'バッタ'] },
    { henshin => 'シャトラーター', medal => [ 'シャチ', 'トラ', 'チーター'] },
    { henshin => 'シャトラゾ',     medal => [ 'シャチ', 'トラ', 'ゾウ'] },
    { henshin => 'シャトラタ',     medal => [ 'シャチ', 'トラ', 'タコ'] },
    { henshin => 'シャゴリドル',   medal => [ 'シャチ', 'ゴリラ', 'コンドル'] },
    { henshin => 'シャゴリバ',     medal => [ 'シャチ', 'ゴリラ', 'バッタ'] },
    { henshin => 'シャゴリーター', medal => [ 'シャチ', 'ゴリラ', 'チーター'] },
    { henshin => 'シャゴリゾ',     medal => [ 'シャチ', 'ゴリラ', 'ゾウ'] },
    { henshin => 'シャゴリタ',     medal => [ 'シャチ', 'ゴリラ', 'タコ'] },
    { henshin => 'シャウドル',     medal => [ 'シャチ', 'ウナギ', 'コンドル'] },
    { henshin => 'シャウバ',       medal => [ 'シャチ', 'ウナギ', 'バッタ'] },
    { henshin => 'シャウーター',   medal => [ 'シャチ', 'ウナギ', 'チーター'] },
    { henshin => 'シャウゾ',       medal => [ 'シャチ', 'ウナギ', 'ゾウ'] },
);

use Acme::KamenriderOOO;
my $ooo = Acme::KamenriderOOO->new;

for (@ashu) {
    stdout_like {
        $ooo->ooo_driver( @{$_->{medal}} );
        $ooo->henshin;
    } qr/$_->{henshin}/, "$_->{henshin}";
}

# error
dies_ok {
  $ooo->set_driver( 'タカ','クワガタ','ゴリラ' );
  $ooo->henshin;
} "不正な組み合わせ";

done_testing;
